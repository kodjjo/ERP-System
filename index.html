<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Inventory List</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }

 

  </style>
</head>
<body class="bg-gradient-to-br from-blue-200 via-blue-300 to-blue-400 min-h-screen">

  <div class="max-w-5xl mx-auto pt-12 pb-20 px-4 text-gray-900">

<!-- Page Heading -->
<div class="text-center mb-10">
  <h1 class="text-5xl sm:text-6xl font-extrabold bg-gradient-to-r from-black via-gray-600 to-white bg-clip-text text-transparent drop-shadow-lg">
    Inventory List
  </h1>
  <p class="text-gray-700 mt-2 text-lg">Manage and track your items with ease</p>
</div>


<!-- Search box -->
<div class="mb-20 relative w-full">
  <!-- Search Icon -->
  <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
         viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z" />
    </svg>
  </span>

  <!-- Input -->
  <input
    type="text"
    id="searchInput"
    placeholder="Search inventory..."
    class="w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 text-gray-800"
    oninput="filterInventory()"
  />
</div>


    <!-- Inventory Cards List -->
    <div id="inventoryList" class="space-y-6"></div>

<!-- Add button -->
<div class="flex justify-center mt-8">
  <a href="create.html" 
     class="bg-blue-600 hover:bg-blue-700 text-white font-semibold w-56 h-14 flex items-center justify-center gap-2 rounded-xl shadow-md transition">
     
     <!-- Plus Icon -->
     <svg xmlns="http://www.w3.org/2000/svg" 
          fill="none" viewBox="0 0 24 24" 
          stroke-width="2" stroke="currentColor" 
          class="w-6 h-6">
       <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
     </svg>

     Add Inventory
  </a>
</div>


  </div>

  <script>
    function getStockBadge(quantity) {
      quantity = parseInt(quantity || 0);
      if (quantity <= 5) {
        return `<span class="bg-red-100 text-red-600 text-xs font-semibold px-2 py-1 rounded-full">Low</span>`;
      } else if (quantity <= 20) {
        return `<span class="bg-yellow-100 text-yellow-700 text-xs font-semibold px-2 py-1 rounded-full">Medium</span>`;
      } else {
        return `<span class="bg-green-100 text-green-700 text-xs font-semibold px-2 py-1 rounded-full">High</span>`;
      }
    }

    function renderInventory(filteredInventory = null) {
      const inventoryList = document.getElementById('inventoryList');
      inventoryList.innerHTML = '';

      const inventory = JSON.parse(localStorage.getItem('inventory')) || [];
      const data = filteredInventory || inventory;

      if (!data.length) {
        inventoryList.innerHTML = `
          <div class="bg-white/60 rounded-2xl p-6 text-center text-gray-700">
            No inventory items yet. Click "Add Inventory" to create one.
          </div>
        `;
        return;
      }

      data.forEach(item => {
        const div = document.createElement('div');

        // Card layout:
        // - column on small screens, row on sm+ screens
        // - vertically center content with items-center
        div.className = "bg-white rounded-2xl shadow p-6 flex flex-col sm:flex-row items-center justify-between gap-6 transform transition duration-300 opacity-0 translate-y-4 hover:shadow-lg";

        div.innerHTML = `
          <!-- Left side: item details (left aligned) -->
          <div class="flex-1 text-left">
            <h2 class="text-xl font-semibold text-gray-800">${item.name || ''}</h2>
            <p class="text-gray-600 mt-1 flex items-center gap-2">
              <span>Quantity: ${item.quantity ?? 0}</span>
              ${getStockBadge(item.quantity)}
            </p>
            <p class="text-gray-600 mt-1">Price: GHS ${item.price ?? ''}</p>
            ${item.category ? `<p class="text-gray-600 mt-1">Category: ${item.category}</p>` : ''}
            ${item.supplier ? `<p class="text-gray-600 mt-1">Supplier: ${item.supplier}</p>` : ''}
          </div>

          <!-- Right side: image + buttons row (fixed width, won't shrink) -->
          <div class="flex-shrink-0 flex flex-col items-center gap-3 w-56">
            ${item.image ? `<img src="${item.image}" alt="item image" class="w-full h-48 object-cover rounded border" />` : `<div class="w-full h-48 bg-gray-100 rounded border flex items-center justify-center text-sm text-gray-500">No image</div>`}

            <div class="flex flex-row gap-2 w-full justify-center">
              <button onclick="editItem(${item.id})" class="bg-[#1c8370] hover:bg-[#16695a] text-white px-3 py-1 rounded text-sm">Edit</button>
              <button onclick="deleteItem(${item.id})" class="bg-[#fc4a4a] hover:bg-[#d63c3c] text-white px-3 py-1 rounded text-sm">Delete</button>
              <button onclick="showItem(${item.id})" class="bg-[#2c3e50] hover:bg-[#1e2b37] text-white px-3 py-1 rounded text-sm">Show</button>
            </div>
          </div>
        `;

        inventoryList.appendChild(div);
        // play the entrance animation
        requestAnimationFrame(() => div.classList.remove('opacity-0', 'translate-y-4'));
      });
    }

    function filterInventory() {
      const query = (document.getElementById('searchInput').value || '').toLowerCase();
      const inventory = JSON.parse(localStorage.getItem('inventory')) || [];

      const filtered = inventory.filter(item =>
        (item.name || '').toLowerCase().includes(query) ||
        String(item.quantity ?? '').includes(query) ||
        String(item.price ?? '').includes(query) ||
        (item.category || '').toLowerCase().includes(query)
      );

      renderInventory(filtered);
    }

    function deleteItem(id) {
      Swal.fire({
        title: 'Are you sure?',
        text: 'This item will be permanently deleted.',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#d33',
        cancelButtonColor: '#3085d6',
        confirmButtonText: 'Yes, delete it!',
        cancelButtonText: 'Cancel'
      }).then((result) => {
        if (result.isConfirmed) {
          const inventory = JSON.parse(localStorage.getItem('inventory')) || [];
          const updated = inventory.filter(item => item.id !== id);
          localStorage.setItem('inventory', JSON.stringify(updated));
          renderInventory();

          Swal.fire({
            toast: true,
            position: 'top-end',
            icon: 'success',
            title: 'Item deleted',
            showConfirmButton: false,
            timer: 1500,
            timerProgressBar: true
          });
        }
      });
    }

    function editItem(id) {
      const inventory = JSON.parse(localStorage.getItem('inventory')) || [];
      const itemToEdit = inventory.find(item => item.id === id);
      localStorage.setItem('editItem', JSON.stringify(itemToEdit));
      window.location.href = 'create.html';
    }

    function showItem(id) {
      localStorage.setItem('showItemId', id);
      window.location.href = 'show.html';
    }

    // initial render
    renderInventory();
  </script>
</body>
</html>
